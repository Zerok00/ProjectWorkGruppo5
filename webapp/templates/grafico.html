{% extends "base.html" %}
{% import "bootstrap/wtf.html" as wtf %}
{% import "_macros.html" as macros %}
{% block title %}PolluShow{% endblock %}

{% block page_content %}

<div>
    {% if current_user.is_authenticated %}
    {% if current_user.can(4) %}
    {{ wtf.quick_form(form) }}
    {% endif %}
    {% endif %}
</div>
    <!-- Content Wrapper -->
    <div id="content-wrapper" class="d-flex flex-column">

        <!-- Main Content -->
        <div id="content">

            <!-- Begin Page Content -->
            <div class="container-fluid">

                <!-- Page Heading -->
                <div class="d-sm-flex align-items-center justify-content-between mb-4 mt-4">
                    <h1 class="h3 mb-0 text-gray-800">Storico</h1>
                </div>

                <!-- Content Row -->
                <div class="row">

                    <!-- Earnings (Monthly) Card Example -->
                    <div class="col mb-4">
                        <div class="card border-left-primary shadow h-100 py-2">
                            <div class="card-body">
                                <div class="row no-gutters align-items-center">
                                    <div class="col mr-2">
                                        <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">
                                            Scheda utente
                                        </div>
                                        <div class="h5 mb-0 font-weight-bold text-gray-800">Schema andamento settimanale
                                            qui
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Content Row -->

                <div class="row">
                    <div class="col" >
                        <div class="card shadow mb-4">
                            <!-- Card Header - Dropdown -->
                            <div
                                    class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                                <h6 class="m-0 font-weight-bold text-primary">Grafico andamento mensile</h6>
                            </div>
                            <!-- Card Body -->
                            <div class="card-body">
                                <div class="chart-area" id="sezione-grafico">

                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-4 col-lg-5">
                        <div class="card shadow mb-4">
                            <!-- Card Header - Dropdown -->
                            <div
                                    class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                                <h6 class="m-0 font-weight-bold text-primary">Istruzioni grafico</h6>

                            </div>
                            <!-- Card Body -->
                            <div class="card-body">
                                1. Tieni premuto il click sinistro e trascina per ingrandire un'area del grafico <br>
                                2. Fai doppio click nell'area del grafico per tornare alle dimensioni originali <br>
                            </div>
                        </div>
                    </div>
                    <!-- Area Chart -->
                </div>

                <!-- Content Row -->
                <div class="row">
                    <!--Inserire qui elementi al di sotto della mappa-->
                </div>
            </div>
        </div>
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<script>
    var graph = {{grafico|safe}};
    Plotly.plot("sezione-grafico", graph, {})
</script>

{% endblock %}

{% block scripts %}
{{ super() }}
{{ pagedown.include_pagedown() }}
{% endblock %}